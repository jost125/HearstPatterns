Phase:Hearst
Input:Token SpaceToken
Options: control = appelt

Macro:Noun
(
	({Token.category=="NNS"}|{Token.category=="NN"}|{Token.category=="JJ"}|{Token.category=="NNP"}|{Token.category=="NNPS"})
)

Macro:SingleNounPhrase
(
	(
		({Token.category=="IN"}|(Noun))
		{SpaceToken.kind==space}
	)*
	(Noun)
)

Macro:NounPhrase
(
	(
		(
			{Token.category=="DT"}
			{SpaceToken.kind==space}
		)?
		(Noun)
	)
	(
		{SpaceToken.kind==space}
		(
			{Token.category=="DT"}
			{SpaceToken.kind==space}
		)?
		(SingleNounPhrase)
	)*
)

Macro:AndOrNounPhrase
(
	{SpaceToken.kind==space}
	({Token.string=="or"}|{Token.string=="and"})
	{SpaceToken.kind==space}
	(NounPhrase)
)

Macro:PunctationNounPhrase
(
	({SpaceToken.kind==space})?
	{Token.kind==punctuation}
	({SpaceToken.kind==space})?
	(NounPhrase)
)

Macro:NounPhrasesAlternatives
(
	(NounPhrase)
	(PunctationNounPhrase)*
	(AndOrNounPhrase)?
)

Rule:Hearst1
(
	(NounPhrase):hypernym
	(
		({SpaceToken.kind==space})?
		{Token.kind==punctuation}
	)?
	{SpaceToken.kind==space}
	{Token.string=="such"}
	{SpaceToken.kind==space}
	{Token.string=="as"}
	{SpaceToken.kind==space}
	(NounPhrasesAlternatives):hyponym
):hearst1
-->
:hearst1.Hearst={rule="Hearst1"},
:hyponym.Hyponym={rule="Hearst1"},
:hypernym.Hypernym={rule="Hearst1"}

Rule:Hearst2
(
	{Token.string==~"[Ss]uch"}
	{SpaceToken.kind==space}
	(NounPhrase):hypernym
	{SpaceToken.kind==space}
	{Token.string=="as"}
	{SpaceToken.kind==space}
	(NounPhrasesAlternatives):hyponym
):hearst2
-->
:hearst2.Hearst={rule="Hearst2"},
:hyponym.Hyponym={rule="Hearst2"},
:hypernym.Hypernym={rule="Hearst2"}

Rule:Hearst3
(
	(
		(NounPhrase)
		(PunctationNounPhrase)*
		({Token.kind==punctuation})?
	):hyponym

	{SpaceToken.kind==space}
	({Token.string=="and"}|{Token.string=="or"})
	{SpaceToken.kind==space}
	{Token.string=="other"}
	{SpaceToken.kind==space}
	(NounPhrase):hypernym
):hearst3
-->
:hearst3.Hearst={rule="Hearst3"},
:hyponym.Hyponym={rule="Hearst3"},
:hypernym.Hypernym={rule="Hearst3"}
